package hr.fer.zemris.vhdllab.entities;

import hr.fer.zemris.vhdllab.dao.DAOException;

import org.junit.Test;



public class EntityDeleteWhenDoneTest {

//    @Test
//    public void saveproject() throws DAOException {
//        EntityManagerUtil.createEntityManagerFactory();
//        EntityManager em = EntityManagerUtil.currentEntityManager();
//        EntityManagerUtil.beginTransaction();
//        
//        em.createNativeQuery("delete from files").executeUpdate();
//        em.createNativeQuery("delete from project_history").executeUpdate();
//        em.createNativeQuery("delete from projects").executeUpdate();
//
//
//        Project project = new Project(new Caseless("user.id"), new Caseless("project_name"));
//        em.persist(project);
//        em.remove(project);
//        em.flush();
//
//        project = new Project(new Caseless("user.id"), new Caseless("project_name"));
//        em.persist(project);
//        em.remove(project);
//        em.flush();
//        
//        project = new Project(new Caseless("user.id"), new Caseless("project_name"));
//        em.persist(project);
//        em.remove(project);
//        em.flush();
//        
//        project = new Project(new Caseless("user.id"), new Caseless("project_name"));
//        em.persist(project);
//        em.remove(project);
//        em.flush();
//        
//        EntityManagerUtil.commitAndCloseTransaction();
//        EntityManagerUtil.closeEntityManager();
//    }
    
    @Test
    public void saveFile() throws DAOException {
//        EntityManagerUtil.createEntityManagerFactory();
//        EntityManager em = EntityManagerUtil.currentEntityManager();
//        EntityManagerUtil.beginTransaction();
//
//        em.createNativeQuery("delete from file_history").executeUpdate();
//        em.createNativeQuery("delete from files").executeUpdate();
//        em.createNativeQuery("delete from project_history").executeUpdate();
//        em.createNativeQuery("delete from projects").executeUpdate();
//        
//        Project project = new Project(new Caseless("user.id"), new Caseless("project_name"));
//        em.persist(project);
//        em.remove(project);
//        em.flush();
//        project = new Project(new Caseless("user.id"), new Caseless("project_name"));
//        em.persist(project);
//        EntityManagerUtil.commitAndCloseTransaction();
//        EntityManagerUtil.beginTransaction();
//        
//        File file = new File(FileType.SOURCE, new Caseless("file_name"), "content");
//        project.addFile(file);
//        em.persist(file);
//        em.flush();
//        file.setData("another1");
//        em.persist(file);
//        em.flush();
//        project.removeFile(file);
//        em.remove(file);
//        em.flush();
//        
//        file = new File(FileType.SOURCE, new Caseless("file_name"), "content");
//        project.addFile(file);
//        em.persist(file);
//        em.flush();
//        file.setData("another1");
//        em.persist(file);
//        em.flush();
//        em.remove(project);
//        em.flush();
//        
//        project = new Project(new Caseless("user.id"), new Caseless("project_name"));
//        file = new File(FileType.SCHEMA, new Caseless("file_name"), "content");
//        project.addFile(file);
//        file = new File(FileType.AUTOMATON, new Caseless("file_name2"), "data2");
//        project.addFile(file);
//        em.persist(project);
//        
//        EntityManagerUtil.commitAndCloseTransaction();
//        EntityManagerUtil.closeEntityManager();
    }

}